<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Pangolin&family=Roboto+Condensed:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="rock_paper.css"/>
    <title>Game console</title>
</head>
<body>
    <div class = "title">Play Janken with GON<div class = "inner-title">First to 5 points wins</div></div>
    <div class = "input-buttons">
        <div class = "buttons-only">
            <div class = "btn-div">
                <button class = "btn" id = "rock" data-choice = "rock"></button><span class = "btn-text" data-choice = "rock">Rock</span>
            </div>
            <div class = "btn-div">
                <button class = "btn" id = "paper" data-choice = "paper"><i class="fa-solid fa-hand"></i></button><span class = "btn-text" data-choice = "paper">Paper</span>
            </div>
            <div class = "btn-div">
                <button class = "btn" id = "scissors" data-choice = "scissors"><i class="fa-solid fa-hand-scissors"></i></i></button><span class = "btn-text" data-choice = "scissors">Scissors</span>
            </div>
        </div>
        <div class = "score-div">
            <div class = "user-score">Player score: 0</div>
            <div class = "computer-score">Gon's Score: 0</div>
        </div>
        <div class = "round-result" style="white-space: pre-wrap;"></div>
        <div class = "final-result" style="white-space: pre-wrap;"></div>
        <button class = "play-again" style = "display: none;">Play Again</button>
    </div>
    <script>

        const pscoreDiv = document.querySelector(".user-score");
        const compscoreDiv = document.querySelector(".computer-score");

        function game(e) {
            let user_choice = this.getAttribute('data-choice');
            let winner = "";

            let computer_choice = getComputerChoice();
            if (user_choice.toUpperCase() == computer_choice) {
                winner = "Tie"
            }

            if (user_choice.toUpperCase() == "ROCK") {
                if (computer_choice == "SCISSORS") {
                    user_score += 1;
                    pscoreDiv.innerHTML = `Player score: ${user_score}`;
                    winner = "Player";
                }
                else if (computer_choice == "PAPER"){
                    computer_score += 1;
                    compscoreDiv.innerHTML = `Gon's Score: ${computer_score}`;
                    winner = "GON";
                }
                }

                else if (user_choice.toUpperCase() == "PAPER") {
                    if (computer_choice == "ROCK") {
                        user_score += 1;
                        pscoreDiv.innerHTML = `Player score: ${user_score}`;
                        winner = "Player";
                    }
                    else if (computer_choice == "SCISSORS") {
                        computer_score += 1;
                        compscoreDiv.innerHTML = `Gon's Score: ${computer_score}`;
                        winner = "GON";
                    }
                }

                else if (user_choice.toUpperCase() == "SCISSORS") {
                    if (computer_choice == "PAPER") {
                        user_score += 1;
                        pscoreDiv.innerHTML = `Player score: ${user_score}`;
                        winner = "Player";
                    }
                    else if (computer_choice == "ROCK") {
                        computer_score += 1;
                        compscoreDiv.innerHTML = `Gon's Score: ${computer_score}`;
                        winner = "GON";
                    }
                }
                if (winner == "GON") {
                    compscoreDiv.style.color = "greenyellow";
                    compscoreDiv.style.textShadow = "0 0 5px #da7f6b";
                    pscoreDiv.style.color = "rgba(230,186,89,255)";
                    pscoreDiv.style.textShadow = "none";
                }
                else if (winner == "Player"){
                    pscoreDiv.style.color = "greenyellow";
                    pscoreDiv.style.textShadow = "0 0 5px #da7f6b";
                    compscoreDiv.style.color = "rgba(230,186,89,255)";
                    compscoreDiv.style.textShadow = "none";
                }
                if (winner == "Tie") {
                    roundResult.innerHTML = `This round is Tied\n<span>Player: ${user_choice.toUpperCase()}           Gon: ${computer_choice}</span>`;
                    
                }
                else {
                    roundResult.innerHTML = `The winner of this round is ${winner}\n<span>Player: ${user_choice.toUpperCase()}           Gon: ${computer_choice}</span>`; // Add "Good luck next if user loses or other interactive responses"
                }
                if (user_score == 5 || computer_score == 5) {
                    finalResult.innerHTML = `${user_score > computer_score ? "Player" : "Computer"} Wins the Game`;
                    pbtn.style.display = "block";
                    btns.forEach(btn => btn.removeEventListener("click", game));
                    }  
            }

        function getComputerChoice() {
            let choice_num = Math.floor(Math.random() * 3)
            let computer_choice = choice[choice_num];
            return computer_choice;
        }

        function playAgain() {
            user_score = 0, computer_score = 0;
            btns.forEach(btn => btn.addEventListener('click', game));
            compscoreDiv.style.color = "rgba(230,186,89,255)";
            compscoreDiv.style.textShadow = "none";
            pscoreDiv.style.color = "rgba(230,186,89,255)";
            pscoreDiv.style.textShadow = "none";
            roundResult.textContent = "";
            finalResult.textContent = "";
            pbtn.style.display = "none";
        }

        function resetImg(e) {
            this.classList.remove('btn-click');
            element.style.color = "rgb(11, 54, 11)";
        }

        let user_score = 0, computer_score = 0;

        const btns = document.querySelectorAll('.btn');
        const pbtn = document.querySelector(".play-again");

        const roundResult = document.querySelector('.round-result');
        const finalResult = document.querySelector('.final-result');

        const spans = document.querySelectorAll('span');

        const choice = ["ROCK", "PAPER", "SCISSORS"];

        let element = "";
  
        btns.forEach(btn => btn.addEventListener('click', game));   
        btns.forEach(btn => btn.addEventListener('mouseover', function(e) {
            this.classList.add('btn-click');
            element = document.querySelector(`.btn-text[data-choice = ${this.getAttribute('data-choice')}]`);
            element.style.color = "rgba(230,186,89,255)";
        }));
        btns.forEach(btn => btn.addEventListener('mouseout', resetImg));
        pbtn.addEventListener('click', playAgain);
            
    </script>
</body>
</html>